require File.expand_path(File.dirname(__FILE__) + '/../spec_helper')
require File.expand_path(File.dirname(__FILE__) + '/../../compile')

describe ZettelRenderer do
  subject(:renderer) { ZettelRenderer.new }
  
  describe 'rendering' do
    let(:contents) { double(:render => "content" }
    let(:separator) { double(:render => "separator" }
    let!(:result) { renderer.render(contents, separator) }
    
    before(:each) do
      contents.should_receive(:render)
      separator.should_receive(:render)
    end
    
    it 'renders contents' do
      expect(contents).to have_received(:render)
    end
    
    it 'renders separator' do
      expect(contents).to have_received(:render)
    end
    
    it 'returns rendition' do
      expect(result).to eq "separatorcontent\n\n"
    end
  end
end
